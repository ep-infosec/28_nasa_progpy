
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/vectorized.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_examples_vectorized.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_vectorized.py:


Example using simulate_to_threshold with vectorized states. In this example we are using the thrown_object model to simulate multiple thrown objects

.. GENERATED FROM PYTHON SOURCE LINES 7-37

.. code-block:: default


    from prog_models.models.thrown_object import ThrownObject
    from numpy import array, all

    def run_example():
        # Step 1: Setup object
        m = ThrownObject()
        def future_load(t, x=None):
            return {}  # No load for thrown objects

        # Step 2: Setup vectorized initial state
        # For this example we are saying there are 4 throwers of various strengths and heights
        first_state = {
            'x': array([1.75, 1.8, 1.85, 1.9]),
            'v': array([35, 39, 22, 47])
        }

        # Step 3: Simulate to threshold
        # Here we are simulating till impact using the first state defined above
        (times, inputs, states, outputs, event_states) = m.simulate_to_threshold(future_load, x = first_state, threshold_keys=['impact'], print = True, dt=0.1, save_freq=2)

        # Now lets do the same thing but only stop when all hit the ground
        def thresholds_met_eqn(thresholds_met):
            return all(thresholds_met['impact'])  # Stop when all impact ground

        simulated_results = m.simulate_to_threshold(future_load, x = first_state, thresholds_met_eqn=thresholds_met_eqn, print = True, dt=0.1, save_freq=2)

    # This allows the module to be executed directly 
    if __name__=='__main__':
        run_example()


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.000 seconds)


.. _sphx_glr_download_auto_examples_vectorized.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example


    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: vectorized.py <vectorized.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: vectorized.ipynb <vectorized.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
