
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/dataset.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_examples_dataset.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_dataset.py:


Example downloading and using a NASA prognostics dataset.

In this example, a battery dataset is downloaded from the NASA PCoE data repository. This dataset is then accessed and plotted. 

.. GENERATED FROM PYTHON SOURCE LINES 9-69

.. code-block:: default


    DATASET_ID = 1

    def run_example():
        # Step 1: Download and import the dataset for a single battery
        # Note: This may take some time
        from prog_models.datasets import nasa_battery
        print('Downloading... ', end='')
        (desc, data) = nasa_battery.load_data(DATASET_ID)
        print('done')

        # We recommend saving the dataset to disk for future use
        # This way you dont have to download it each time
        import pickle
        pickle.dump((desc, data), open(f'dataset_{DATASET_ID}.pkl', 'wb'))

        # Step 2: Access the dataset description
        print(f'\nDataset {DATASET_ID}')
        print(desc['description'])
        print(f'Procedure: {desc["procedure"]}')

        # Step 3: Access the dataset data
        # Data is in format [run_id][time][variable]
        # For the battery the variables are 
        #    0: relativeTime (since beginning of run)
        #    1: current (amps)
        #    2: voltage
        #    3: temperature (Â°C)
        # so that data[a][b, 3] is the temperature at time index b (relative to the start of the run) for run a
        print(f'\nNumber of runs: {len(data)}')
        print(f'\nAnalyzing run 4')
        print(f'number of time indices: {len(data[4])}')
        print(f"Details of run 4: {desc['runs'][4]}")

        # Plot the run
        import matplotlib.pyplot as plt
        plt.figure()
        plt.subplot(2, 1, 1)
        plt.plot(data[4][:, 0], data[4][:, 1])
        plt.ylabel('Current (A)')

        plt.subplot(2, 1, 2)
        plt.plot(data[4][:, 0], data[4][:, 2])
        plt.ylabel('Voltage (V)')
        plt.xlabel('Time (s)')
        plt.title('Run 4')

        # Graph all reference discharge profiles
        indices = [i for i, x in enumerate(desc['runs']) if 'reference discharge' in x['desc'] and 'rest' not in x['desc']]
        plt.figure()
        for i in indices:
            plt.plot(data[i][:, 0], data[i][:, 2], label=f"Run {i}")
        plt.title('Reference discharge profiles')
        plt.xlabel('Time (s)')
        plt.ylabel('Voltage (V)')
        plt.show()

    # This allows the module to be executed directly 
    if __name__=='__main__':
        run_example()


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.000 seconds)


.. _sphx_glr_download_auto_examples_dataset.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example


    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: dataset.py <dataset.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: dataset.ipynb <dataset.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
